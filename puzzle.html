<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chess Puzzles</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #333;
      color: white;
      padding: 1em;
      text-align: center;
    }
    .layout {
      display: flex;
      min-height: 100vh;
    }
    .sidebar-container {
      width: 200px;
      background: #f2f2f2;
      padding: 1em;
      box-sizing: border-box;
      overflow-y: auto;
    }
    .main-content {
      flex: 1;
      padding: 1em;
    }
    .content-area {
      max-width: 600px;
      margin: 0 auto;
    }
    #chessboard {
      margin-top: 1em;
      display: grid;
      grid-template-columns: repeat(8, 50px);
      grid-template-rows: repeat(8, 50px);
      border: 2px solid #333;
    }
    .square {
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      user-select: none;
    }

    .puzzle-controls {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>Chess Puzzles</h1>
  </header>

  <div class="layout">
    <div class="sidebar-container" id="sidebar-container"></div>

    <div class="main-content">
      <div class="content-area">
        <h2 id="puzzleTitle">Puzzle 1: White to move and mate in 1</h2>
        <p id="puzzleDescription">
          White King on e1, Queen on h5, Black King on g8. Solution: Qh7#
        </p>

        <div id="chessboard"></div>

        <div class="puzzle-controls">
          <button id="prevPuzzleBtn">← Previous</button>
          <button id="nextPuzzleBtn">Next →</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    fetch('sidebar.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('sidebar-container').innerHTML = html;
      })
      .catch(() => {
      });
  </script>

  <script>
    const puzzles = [
      {
        title: "Puzzle 1: White to move and mate in 1",
        description: "White King on e1, Queen on h5, Black King on g8. Solution: Qh7#",
        pieces: {
          e1: "♔",
          h5: "♕",
          g8: "♚"
        }
      },
      {
        title: "Puzzle 2: Black to move and win material",
        description: "Black Rook on a8, White Queen on a1. Solution: Ra1+ wins the Queen.",
        pieces: {
          a1: "♕",
          a8: "♜"
        }
      },
      {
        title: "Puzzle 3: White to move and mate in 2",
        description: "White Rook on h1, Queen on h6, Black King on g8. Solution: Qh7+ Kg8 Rh8#",
        pieces: {
          h1: "♖",
          h6: "♕",
          g8: "♚"
        }
      },
      {
        title: "Puzzle 4: White to move and fork",
        description: "White Knight on d5 attacks Black Queen on e7 and Rook on c7.",
        pieces: {
          d5: "♘",
          e7: "♛",
          c7: "♜"
        }
      }
    ];

    const chessboard = document.getElementById("chessboard");
    const puzzleTitle = document.getElementById("puzzleTitle");
    const puzzleDescription = document.getElementById("puzzleDescription");
    const prevBtn = document.getElementById("prevPuzzleBtn");
    const nextBtn = document.getElementById("nextPuzzleBtn");

    const files = "abcdefgh";
    let currentPuzzle = 0;

    function renderBoard(puzzle) {
      chessboard.innerHTML = "";

      for (let rank = 8; rank >= 1; rank--) {
        for (let file = 0; file < 8; file++) {
          const squareId = files[file] + rank;
          const isWhiteSquare = (rank + file) % 2 === 0;

          const square = document.createElement("div");
          square.className = "square " + (isWhiteSquare ? "white" : "black");
          square.textContent = puzzle.pieces[squareId] || "";

          chessboard.appendChild(square);
        }
      }
    }

    function showPuzzle(index) {
      const puzzle = puzzles[index];
      puzzleTitle.textContent = puzzle.title;
      puzzleDescription.textContent = puzzle.description;
      renderBoard(puzzle);
    }

    prevBtn.addEventListener("click", () => {
      if (currentPuzzle > 0) {
        currentPuzzle--;
        showPuzzle(currentPuzzle);
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentPuzzle < puzzles.length - 1) {
        currentPuzzle++;
        showPuzzle(currentPuzzle);
      }
    });

    showPuzzle(currentPuzzle);
  </script>
</body>
</html>
